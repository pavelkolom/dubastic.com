"use strict";var basePath="/Forums/AdminApi/",Top={template:"#Top",data:function(){return{loading:!0}},mounted:function(){},methods:{setLoading:function(t){this.loading=t}}},loadingMixin={data:function(){return{alert:!1,message:""}},props:{loading:Boolean},methods:{startLoad:function(){this.$emit("setLoading",!0)},endLoad:function(t){var e;this.$emit("setLoading",!1),t&&(this.alert=!0,this.message=t,e=this,setTimeout(function(){e.alert=!1},5e3))}}},settingsMixin={data:function(){return{settings:{}}},created:function(){var e=this;this.startLoad(),axios.get(basePath+"GetSettings").then(function(t){e.settings=t.data,e.endLoad()})},methods:{save:function(e){var a=this;this.startLoad(),axios.post(basePath+"SaveSettings",this.settings).then(function(t){a.settings=t.data,a.endLoad(e)})}}},General={mixins:[settingsMixin,loadingMixin],template:"#General"},Categories={mixins:[loadingMixin],template:"#Categories",data:function(){return{categories:[],newCategory:"",editCategory:"",editID:0}},created:function(){var e=this;this.startLoad(),axios.get(basePath+"GetCategories").then(function(t){e.categories=t.data,e.endLoad()})},methods:{saveNew:function(){var e=this;this.startLoad(),axios.post(basePath+"AddCategory",{title:this.newCategory}).then(function(t){e.categories=t.data,e.endLoad()}),this.newCategory=""},deleteCat:function(t){var e=this;this.startLoad(),axios.post(basePath+"DeleteCategory/"+t.categoryID).then(function(t){e.categories=t.data,e.endLoad()})},up:function(t){var e=this;this.startLoad(),axios.post(basePath+"MoveCategoryUp/"+t.categoryID).then(function(t){e.categories=t.data,e.endLoad()})},down:function(t){var e=this;this.startLoad(),axios.post(basePath+"MoveCategoryDown/"+t.categoryID).then(function(t){e.categories=t.data,e.endLoad()})},editCat:function(t){this.editCategory=t.title,this.editID=t.categoryID;t=this.$refs.modal;$(t).modal("show")},saveCat:function(){var e=this;this.startLoad(),axios.post(basePath+"EditCategory",{categoryID:this.editID,title:this.editCategory}).then(function(t){e.categories=t.data;t=e.$refs.modal;$(t).modal("hide"),e.endLoad()})}}},Forums={mixins:[loadingMixin],template:"#Forums",data:function(){return{categories:[],editingForum:null}},created:function(){var e=this;this.startLoad(),axios.get(basePath+"GetForums").then(function(t){e.categories=t.data,e.endLoad()}),this.resetForum()},methods:{up:function(t){var e=this;this.startLoad(),axios.post(basePath+"MoveForumUp/"+t.forumID).then(function(t){e.categories=t.data,e.endLoad()})},down:function(t){var e=this;this.startLoad(),axios.post(basePath+"MoveForumDown/"+t.forumID).then(function(t){e.categories=t.data,e.endLoad()})},editForum:function(t){this.editingForum=t,this.editingForum.categoryID||(this.editingForum.categoryID=0);t=this.$refs.modal;$(t).modal("show")},resetForum:function(){this.editingForum={forumID:0,title:"",description:"",categoryID:0,isVisible:!0,isArchived:!1,isQAForum:!1,forumAdapterName:null}},newForum:function(){this.resetForum();var t=this.$refs.modal;$(t).modal("show")},saveForum:function(){var e=this;this.startLoad(),axios.post(basePath+"SaveForum",this.editingForum).then(function(t){e.categories=t.data;t=e.$refs.modal;$(t).modal("hide"),e.endLoad()})}}},ForumPermissions={mixins:[loadingMixin],template:"#ForumPermissions",data:function(){return{categories:[],selectedForum:null,allRoles:[],postRoles:[],viewRoles:[],selectedAll:null,selectedPost:null,selectedView:null}},created:function(){var e=this;this.startLoad(),axios.get(basePath+"GetForums").then(function(t){e.categories=t.data,e.endLoad()}),this.updatePerm()},methods:{forumChange:function(){this.updatePerm()},updatePerm:function(){var e=this;this.selectedForum&&(this.startLoad(),axios.get(basePath+"GetForumPermissions/"+this.selectedForum).then(function(t){e.allRoles=t.data.allRoles,e.viewRoles=t.data.viewRoles,e.postRoles=t.data.postRoles,e.endLoad()}))},modify:function(t,e){var a=this;this.startLoad(),axios.post(basePath+"ModifyForumRoles",{forumID:this.selectedForum,modifyType:t,role:e}).then(function(t){a.endLoad(),a.updatePerm()})}}},Email={mixins:[settingsMixin,loadingMixin],template:"#Email"},Search={mixins:[settingsMixin,loadingMixin],template:"#Search",data:function(){return{junkWords:[],selectedWord:null,newWord:""}},created:function(){this.updateJunk()},methods:{updateJunk:function(){var e=this;this.startLoad(),axios.get(basePath+"GetJunkWords").then(function(t){e.junkWords=t.data,e.endLoad()})},createWord:function(){var e=this;this.startLoad(),axios.post(basePath+"CreateJunkWord/"+this.newWord).then(function(t){e.endLoad(),e.newWord="",e.updateJunk()})},deleteWord:function(){var e=this;this.startLoad(),axios.post(basePath+"DeleteJunkWord/"+this.selectedWord).then(function(t){e.endLoad(),e.updateJunk()})}}},ExternalLogins={mixins:[settingsMixin,loadingMixin],template:"#ExternalLogins"},EditUser={mixins:[loadingMixin],template:"#EditUser",data:function(){return{searchResults:[],searchText:"",searchType:"name",searchAlert:!1}},methods:{search:function(){var e=this;this.startLoad(),axios.post(basePath+"EditUserSearch",{searchType:this.searchType,searchText:this.searchText}).then(function(t){e.searchResults=t.data,e.endLoad(),0===e.searchResults.length?e.searchAlert=!0:e.searchAlert=!1})}}},EditUserDetail={mixins:[loadingMixin],template:"#EditUserDetail",data:function(){return{user:{newEmail:"",newPassword:""},roles:[]}},created:function(){var e=this,t=basePath+"GetUser/"+this.$route.params.id;axios.get(t).then(function(t){e.user=t.data}),this.startLoad(),axios.get(basePath+"GetAllRoles").then(function(t){e.roles=t.data,e.endLoad()})},methods:{saveUser:function(e){var a=this;this.startLoad(),axios.post(basePath+"SaveUser",this.user).then(function(t){a.endLoad(e)}).catch(function(t){alert(t)})},uploadAvatar:function(e){var a=this,t=new FormData,i=e.files;t.append("avatarFile",i[0],i[0].name),axios.post(basePath+"UpdateUserAvatar/"+this.user.userID,t).then(function(t){a.user.avatarID=t.data.avatarID,e.value=""})},removeAvatar:function(){var e=this;axios.post(basePath+"UpdateUserAvatar/"+this.user.userID,null).then(function(t){e.user.avatarID=t.data.avatarID})},uploadImage:function(e){var a=this,t=new FormData,i=e.files;t.append("imageFile",i[0],i[0].name),axios.post(basePath+"UpdateUserImage/"+this.user.userID,t).then(function(t){a.user.imageID=t.data.imageID,e.value=""})},removeImage:function(){var e=this;axios.post(basePath+"UpdateUserImage/"+this.user.userID,null).then(function(t){e.user.imageID=t.data.imageID})},deleteUser:function(){var e=this;axios.post(basePath+"DeleteUser/"+this.user.userID,null).then(function(t){e.$router.push("/edituser")})},deleteAndBanUser:function(){var e=this;axios.post(basePath+"DeleteAndBanUser/"+this.user.userID,null).then(function(t){e.$router.push("/edituser")})}}},UserRoles={mixins:[loadingMixin],template:"#UserRoles",data:function(){return{roles:[],newRole:"",selectedAll:null}},created:function(){this.refreshRoles()},methods:{refreshRoles:function(){var e=this;this.startLoad(),axios.get(basePath+"GetAllRoles").then(function(t){e.roles=t.data,e.endLoad()})},createRole:function(){var e=this;this.newRole&&""!=this.newRole&&(this.startLoad(),axios.post(basePath+"CreateRole/"+this.newRole).then(function(t){e.endLoad(),e.refreshRoles(),e.newRole=""}))},deleteRole:function(){var e=this;this.selectedAll&&(this.startLoad(),axios.post(basePath+"DeleteRole/"+this.selectedAll).then(function(t){e.endLoad(),e.refreshRoles()}))}}},UserImageApproval={mixins:[loadingMixin],template:"#UserImageApproval",data:function(){return{isNewUserImageApproved:!1,unapproved:[]}},created:function(){this.refreshData()},methods:{refreshData:function(){var e=this;this.startLoad(),axios.get(basePath+"GetImageApproval").then(function(t){e.isNewUserImageApproved=t.data.isNewUserImageApproved,e.unapproved=t.data.unapproved,e.endLoad()})},approveImage:function(t){var e=this;this.startLoad(),axios.post(basePath+"ApproveUserImage/"+t).then(function(t){e.refreshData(),e.endLoad()})},deleteImage:function(t){var e=this;this.startLoad(),axios.post(basePath+"DeleteUserImage/"+t).then(function(t){e.refreshData(),e.endLoad()})}}},EmailIpBan={mixins:[loadingMixin],template:"#EmailIpBan",data:function(){return{ips:[],emails:[],newEmail:"",newIP:"",selectedIP:null,selectedEmail:null}},created:function(){this.refreshData()},methods:{refreshData:function(){var e=this;this.startLoad(),axios.get(basePath+"GetEmailIPBan").then(function(t){e.emails=t.data.emails,e.ips=t.data.ips,e.endLoad()})},banEmail:function(){var e=this;this.startLoad(),axios.post(basePath+"BanEmail",{string:this.newEmail}).then(function(t){e.endLoad(),e.newEmail="",e.refreshData()})},removeEmail:function(){var e=this;this.startLoad(),axios.post(basePath+"RemoveEmail",{string:this.selectedEmail}).then(function(t){e.endLoad(),e.refreshData()})},banIP:function(){var e=this;this.startLoad(),axios.post(basePath+"BanIP",{string:this.newIP}).then(function(t){e.endLoad(),e.newIP="",e.refreshData()})},removeIP:function(){var e=this;this.startLoad(),axios.post(basePath+"RemoveIP",{string:this.selectedIP}).then(function(t){e.endLoad(),e.refreshData()})}}},EmailUsers={mixins:[loadingMixin],template:"#EmailUsers",data:function(){return{subject:"",body:"",htmlBody:"",errorMessage:"",isErrorVisible:!1,isSuccess:!1}},methods:{sendMail:function(){var e=this;this.isErrorVisible=!1,this.startLoad(),axios.post(basePath+"EmailUsers",{subject:this.subject,body:this.body,htmlBody:this.htmlBody}).then(function(t){e.endLoad(),e.subject="",e.body="",e.htmlBody="",e.isSuccess=!0}).catch(function(t){e.endLoad(),e.isErrorVisible=!0,e.isSuccess=!1,e.errorMessage=t.response.data.error})}}},ScoringGame={mixins:[settingsMixin,loadingMixin],template:"#ScoringGame"},EventDefinitions={mixins:[loadingMixin],template:"#EventDefinitions",data:function(){return{allEvents:[],staticIDs:[],newEvent:{eventDefinitionID:"",description:"",pointValue:"",isPublishedToFeed:!1}}},created:function(){this.refreshData()},methods:{refreshData:function(){var e=this;this.startLoad(),axios.get(basePath+"GetAllEventDefinitions").then(function(t){e.allEvents=t.data.allEvents,e.staticIDs=t.data.staticIDs,e.endLoad()})},deleteEvent:function(t){var e=this;this.startLoad(),axios.post(basePath+"DeleteEvent/"+t.eventDefinitionID).then(function(t){e.refreshData(),e.endLoad()})},resetEvent:function(){this.newEvent.eventDefinitionID="",this.newEvent.description="",this.newEvent.pointValue="",this.newEvent.isPublishedToFeed=!1},openNewEvent:function(){this.resetEvent();var t=this.$refs.modal;$(t).modal("show")},createEvent:function(){var a=this;this.startLoad(),axios.post(basePath+"CreateEvent",this.newEvent).then(function(t){a.refreshData();var e=a.$refs.modal;$(e).modal("hide"),a.endLoad()})}}},AwardDefinitions={mixins:[loadingMixin],template:"#AwardDefinitions",data:function(){return{allAwards:[],newAward:{awardDefinitionID:"",title:"",description:"",isSingleTimeAward:!1}}},created:function(){this.refreshData()},methods:{refreshData:function(){var e=this;this.startLoad(),axios.get(basePath+"GetAllAwardDefinitions").then(function(t){e.allAwards=t.data,e.endLoad()})},deleteAward:function(t){var e=this;this.startLoad(),axios.post(basePath+"DeleteAward/"+t.awardDefinitionID).then(function(t){e.refreshData(),e.endLoad()})},resetAward:function(){this.newAward.awardDefinitionID="",this.newAward.title="",this.newAward.description="",this.newAward.isSingleTimeAward=!1},openNewAward:function(){this.resetAward();var t=this.$refs.modal;$(t).modal("show")},createAward:function(){var a=this;this.startLoad(),axios.post(basePath+"CreateAward",this.newAward).then(function(t){a.refreshData();var e=a.$refs.modal;$(e).modal("hide"),a.endLoad()})}}},AwardDefinitionDetail={mixins:[loadingMixin],template:"#AwardDefinitionDetail",data:function(){return{award:{},conditions:[],allEvents:[],newCondition:{awardDefinitionID:0,eventDefinitionID:"",eventCount:0}}},created:function(){this.refreshData()},methods:{refreshData:function(){var e=this;this.startLoad();var t=basePath+"GetAward/"+this.$route.params.id;axios.get(t).then(function(t){e.award=t.data.award,e.conditions=t.data.conditions,e.allEvents=t.data.allEvents,e.endLoad()})},deleteCondition:function(t){var e=this;this.startLoad(),axios.post(basePath+"DeleteCondition",{awardDefinitionID:this.award.awardDefinitionID,eventDefinitionID:t.eventDefinitionID}).then(function(t){e.refreshData(),e.endLoad()})},createCondition:function(){var a=this;this.newCondition.awardDefinitionID=this.award.awardDefinitionID,this.startLoad(),axios.post(basePath+"CreateCondition",this.newCondition).then(function(t){a.refreshData();var e=a.$refs.modal;$(e).modal("hide"),a.endLoad()})},openNewCondition:function(){this.newCondition.eventCount="";var t=this.$refs.modal;$(t).modal("show")}}},ManualEvent={mixins:[loadingMixin],template:"#ManualEvent",data:function(){return{allEvents:[],searchName:"",searchResults:[],selectedUser:{},message:"",points:0,eventDefinitionID:""}},created:function(){var e=this;this.startLoad(),axios.get(basePath+"GetAllEvents").then(function(t){e.allEvents=t.data,e.endLoad()})},methods:{openSearch:function(){var t=this.$refs.modal;$(t).modal("show")},updateList:function(){var e=this;this.searchName.length<2||(this.startLoad(),axios.post(basePath+"GetNames",{string:this.searchName}).then(function(t){e.searchResults=t.data,e.endLoad()}))},chooseUser:function(){var t=this.$refs.modal;$(t).modal("hide")},createManualEvent:function(){var e=this;this.startLoad(),axios.post(basePath+"CreateManualEvent",{userID:this.selectedUser.userID,message:this.message,points:this.points}).then(function(t){e.endLoad(),e.message="",e.points=0}).catch(function(t){alert(t.response.data),e.endLoad()})},createExistingManualEvent:function(){var e=this;this.startLoad(),axios.post(basePath+"CreateExistingManualEvent",{userID:this.selectedUser.userID,message:this.message,points:null,eventDefinitionID:this.eventDefinitionID}).then(function(t){e.endLoad(),e.message=""}).catch(function(t){alert(t.response.data),e.endLoad()})}}},IPHistory={mixins:[loadingMixin],template:"#IPHistory",data:function(){return{history:[],query:{iP:"",start:"",end:""}}},methods:{getHistory:function(){var e=this;this.startLoad(),axios.post(basePath+"QueryIPHistory",this.query).then(function(t){e.history=t.data,e.endLoad()})}}},SecurityLog={mixins:[loadingMixin],template:"#SecurityLog",data:function(){return{history:[],query:{searchTerm:"",type:"Name",start:"",end:""}}},methods:{getHistory:function(){var e=this;this.startLoad(),axios.post(basePath+"QuerySecurityLog",this.query).then(function(t){e.history=t.data,e.endLoad()})}}},ModerationLog={mixins:[loadingMixin],template:"#ModerationLog",data:function(){return{history:[],query:{start:"",end:""}}},methods:{getHistory:function(){var e=this;this.startLoad(),axios.post(basePath+"QueryModerationLog",this.query).then(function(t){e.history=t.data,e.endLoad()})}}},ErrorLog={mixins:[loadingMixin],template:"#ErrorLog",data:function(){return{errorList:{pageIndex:1,pageSize:20,list:[]}}},created:function(){this.getErrors()},methods:{getMore:function(t){this.errorList.pageIndex=t,this.getErrors()},getErrors:function(){var e=this;this.startLoad(),axios.get(basePath+"GetErrorLog/"+this.errorList.pageIndex).then(function(t){e.errorList=t.data,e.endLoad()})},deleteAll:function(){var e=this;this.startLoad(),axios.post(basePath+"DeleteAllErrors").then(function(t){e.errorList.pageIndex=1,e.endLoad(),e.getErrors()})}}},Services={mixins:[loadingMixin],template:"#Services",data:function(){return{list:{}}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.startLoad(),axios.get(basePath+"GetServices").then(function(t){e.list=t.data,e.endLoad()})},clearAll:function(){var e=this;this.startLoad(),axios.post(basePath+"ClearServices").then(function(t){e.list=t.data,e.endLoad()})}}},routes=[{path:"/",component:Top,redirect:"/general",children:[{path:"/general",component:General},{path:"/categories",component:Categories},{path:"/forums",component:Forums},{path:"/forumpermissions",component:ForumPermissions},{path:"/email",component:Email},{path:"/search",component:Search},{path:"/externallogins",component:ExternalLogins},{path:"/edituser",component:EditUser},{path:"/edituser/:id",component:EditUserDetail},{path:"/userroles",component:UserRoles},{path:"/userimageapproval",component:UserImageApproval},{path:"/emailipban",component:EmailIpBan},{path:"/emailusers",component:EmailUsers},{path:"/scoringgame",component:ScoringGame},{path:"/eventdefinitions",component:EventDefinitions},{path:"/awarddefinitions",component:AwardDefinitions},{path:"/awarddefinitions/:id",component:AwardDefinitionDetail},{path:"/manualevent",component:ManualEvent},{path:"/iphistory",component:IPHistory},{path:"/securitylog",component:SecurityLog},{path:"/moderationlog",component:ModerationLog},{path:"/errorlog",component:ErrorLog},{path:"/services",component:Services}]},{path:"*",redirect:"/general"}],router=new VueRouter({caseSensitive:!1,routes:routes,mode:"history",base:"/forums/admin"}),app=new Vue({router:router}).$mount("#app");
//# sourceMappingURL=Admin.min.js.map
